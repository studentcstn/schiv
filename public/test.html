<html>
    <body>
        <script type="text/javascript" src="bower_components/jquery/dist/jquery.min.js"></script>
        <table>
            <tr>
                <td> <label for="user">User</label> </td>
                <td></td>
                <td>
                    <select id="user" name="user" >
                        <option value="">no user</option>
                        <option value="helmut.kohl@hof-university.de:clearTextPassword">1, helmut.kohl, Docent</option>
                        <option value="hanz.wurst@hof-university.de:clearTextPassword">2, hanz.wurst, Student</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td> <label for="method">Method</label> </td>
                <td></td>
                <td>
                    <select id="method" name="method" >
                        <option>PUT</option>
                        <option>POST</option>
                        <option>DELETE</option>
                        <option>GET</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td> <label for="url">Url</label> </td>
                <td></td>
                <td> <input id="url" name="url" value=""> </td>
            </tr>
            <tr>
                <td> <label for="content">Content</label> </td>
                <td></td>
                <td> <textarea id="content" name="content" rows=25 cols=55></textarea> </td>
                <td> <textarea id="answer" rows=25 cols=55></textarea> </td>
            </tr>
            <tr>
                <td></td>
                <td>&nbsp;&nbsp;</td>
                <td>
                    <input type="button" id="send" value="Send..." onclick="send()">
                    <input type="button" id="pretty" value="Pretty" onclick="pretty()">
                </td>
            </tr>
        </table>
        <script type="text/javascript">
            function pretty() {
                var content = $("#content")[0];
                var answer = $("#answer")[0];

                try {
                    json = JSON.parse(content.value);
                } catch(err) {
                    answer.value = err.message;
                    throw err;
                }

                content.value = JSON.stringify(json, null, 2);
            }
            function send() {
                var user = $("#user")[0].value;
                var method = $("#method")[0].value;
                var url = $("#url")[0].value;
                var content = $("#content")[0].value;
                var answer = $("#answer")[0];

                answer.value = "";

                if (content != "") {
                    try {
                        JSON.parse(content);
                    } catch(err) {
                        answer.value = err.message;
                        throw err;
                    }
                }

                var headers = {}; 
                if (user != "") {
                    headers = {
                        "Authorization": "Basic " + window.btoa(user)
                    };
                }

                $.ajax({
                    url: url,
                    type: method,
                    headers: headers,
                    dataType: 'json',
                    contentType: "application/json",
                    error: function (xhr, state, exception) {
                        if (state !== "parsererror") {
                            window.open().document.write(xhr.responseText);
                        } else {
                            answer.value = "response: " + xhr.status + "\n";
                            answer.value += xhr.responseText;
                        }
                    },
                    success: function (data) {
                        answer.value = "response: 200\n";
                        answer.value += JSON.stringify(data, null, 2);
                    },
                    data: content
                });
            }
        </script>
    </body>
</html>
